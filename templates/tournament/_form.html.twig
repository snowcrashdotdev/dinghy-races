{{ form_start(form) }}
    {{ form_widget(form._token) }}

    {{form_errors(form)}}
    {{form_widget(form.title, {'attr':{'class':'full-width'}})}}

    <section>
        <label class="half-width">Start Date</label>
        <label class="half-width">End Date</label>
        {{form_widget(form.start_date,{'attr':{'class':'half-width'}})}}
        {{form_widget(form.end_date,{'attr':{'class':'half-width'}})}}
    </section>

    {{form_widget(form.description)}}

    <section class="tournament-collection margin-y padding bg-white">
        {{form_label(form.games)}}
        {{form_widget(
            form.games, {
                'attr': {
                    'data-prototype-name': form.games.vars.prototype.vars.name,
                    'data-index': form.games|length
                    }
                }
            )
        }}
        
        <button class="add-to-collection full-width margin-y" type="button" data-collection="{{form.games.vars.id}}">Add Game</button>
    </section>

    <section class="tournament-collection margin-y padding bg-white">
        {{form_label(form.teams)}}
        <div
            id="{{form.teams.vars.id}}"
            data-prototype="{{form_widget(form.teams.vars.prototype)|e}}"
            data-index="{{form.teams|length}}"
            data-prototype-name="{{form.teams.vars.prototype.vars.name}}">
        {% for team in form.teams %}
            {{form_row(team.name)}}
            <div
                class="tournament-collection"
                id="{{team.members.vars.id}}"
                data-prototype="<div>{{form_widget(team.members.vars.prototype)|e}}</div>"
                data-prototype-name="{{team.members.vars.prototype.vars.name}}"
                data-index="{{team.members|length}}">
            {% for member in team.members %}
                {{form_row(member)}}
            {% endfor %}
            </div>
            <button class="add-to-collection push-center" type="button" data-collection="{{team.members.vars.id}}">Add Member</button>
        {% endfor %}
        </div>
        <button class="add-to-collection full-width margin-y" type="button" data-collection="{{form.teams.vars.id}}">Add Team</button>
    </section>
    <button class="full-width margin-y">{{ button_label|default('Save') }}</button>
{{ form_end(form, {'render_rest': false}) }}
<input type="hidden" id="ajax-search-path" data-user="{{ path('user_search') }}" data-game="{{ path('game_search') }}">
<script src="{{ asset('/js/tournament-admin.js') }}"></script>